# utils.py

import math

class Utils:
    """
    Κλάση με στατικές βοηθητικές συναρτήσεις για γεωμετρικές/μαθηματικές πράξεις,
    όπως υπολογισμός τετραγωνικής απόστασης μεταξύ σημείων και ελάχιστης
    απόστασης σημείου-MBR.
    """

    @staticmethod
    def squared_distance(x1, y1, x2, y2):
        """
        Υπολογίζει την τετραγωνική Ευκλείδεια απόσταση μεταξύ δύο σημείων (x1, y1) και (x2, y2).

        Η τετραγωνική απόσταση δίνεται από:
            (x1 - x2)^2 + (y1 - y2)^2

        :param x1: Συντεταγμένη x του πρώτου σημείου.
        :param y1: Συντεταγμένη y του πρώτου σημείου.
        :param x2: Συντεταγμένη x του δεύτερου σημείου.
        :param y2: Συντεταγμένη y του δεύτερου σημείου.
        :return: Ένας ακέραιος ή float που αντιστοιχεί στην τετραγωνική απόσταση.
        """
        return (x1 - x2) ** 2 + (y1 - y2) ** 2

    @staticmethod
    def mindist_squared(x, y, mbr):
        """
        Υπολογίζει την ελάχιστη τετραγωνική απόσταση ενός σημείου (x, y)
        από ένα MBR (Minimum Bounding Rectangle).

        Ουσιαστικά, βρίσκουμε την απόσταση από το σημείο στο πλησιέστερο σημείο του MBR.
        Αυτό μπορεί να είναι μέσα στο MBR (αν το σημείο πέφτει "πάνω" του),
        ή σε κάποια ακμή ή γωνία του. Χρησιμοποιείται κυρίως για pruning βήματα
        σε αλγορίθμους όπως k-NN.

        * Αν το σημείο (x, y) βρίσκεται "εντός" των ορίων [xmin, xmax], [ymin, ymax],
          η απόσταση είναι 0.
        * Αν βρίσκεται δεξιά του xmax, τότε η απόσταση στο x είναι (x - xmax).
        * Αν βρίσκεται αριστερά του xmin, η απόσταση στο x είναι (xmin - x).
        * Ομοίως για τον άξονα y.

        :param x: Συντεταγμένη x του σημείου.
        :param y: Συντεταγμένη y του σημείου.
        :param mbr: Ένα αντικείμενο MBR (με xmin, ymin, xmax, ymax).
        :return: Η ελάχιστη τετραγωνική απόσταση του σημείου από το MBR (float).
        """
        dx = max(mbr.xmin - x, 0, x - mbr.xmax)
        dy = max(mbr.ymin - y, 0, y - mbr.ymax)
        return dx**2 + dy**2
